<div class="container-fluid" xmlns="http://www.w3.org/1999/html">
<div class="row " >
<div class="col-6">
  <h3 style="text-align: center"> CUSTOMER LIST</h3>
</div>
<div class="col-6">
  <div class="row">
    <div class="col-4 mt-2">
     <input style="border-radius: 10px" placeholder="Name" type="text" [(ngModel)]="name">
    </div>
    <div class="col-4 mt-2">
     <input  style="border-radius: 10px" placeholder="Address" type="text" [(ngModel)]="address">
    </div>
    <div class="  col-4 mt-1">
      <button class="btn btn-success mb-1 center-box form-control text-dark" (click)="search()">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
</div>
</div>




<table class="table table-hover table-striped table-center container-fluid" style="margin-top: 0px" id="table">
  <thead>
  <tr style="height: 70px">
    <th style="height: 70px" class="border-0 text-white bg-dark">STT</th>
    <th style="height: 70px" class="border-0  text-white bg-dark">CUSTOMER TYPE</th>
    <th style="height: 70px" class="border-0 text-white  bg-dark">NAME</th>
    <th style="height: 70px" class="border-0 text-white  bg-dark">DATE OF BIRTH</th>
    <th style="height: 70px" class="border-0 text-white  bg-dark">GENDER</th>
    <th style="height: 70px" class="border-0 text-white  bg-dark">INDENTITY</th>
    <th style="height: 70px" class="border-0 text-white  bg-dark">PHONE NUMBER</th>
    <th style="height: 70px" class="border-0 text-white  bg-dark">EMAIL</th>
    <th style="height: 70px" class="border-0 text-white  bg-dark">ADDRESS</th>
    <th style="height: 70px" class="border-0 bg-dark  text-success">𝔻𝔼𝕋𝔸𝕀𝕃</th>
    <th style="height: 70px" class="border-0 bg-dark  text-warning">𝔼𝔻𝕀𝕋</th>
    <th style="height: 70px" class="border-0 bg-dark ">
      <span class="text-success">𝔻</span>
      <span style="color: white">𝔼</span>
      <span style="color: gold">𝕃</span>
      <span style="color: white">𝔼</span>
      <span class="text-danger">T</span>
      <span style="color: white">𝔼</span>
    </th>
  </tr>
  </thead>

  <tbody *ngIf="customerList">
  <tr style="height: 40px"  *ngFor="let customer of customerList; index as i">
    <td>{{i + 1}}</td>
    <td>{{customer.customerType.name}}</td>
    <td>{{customer.name}}</td>
    <td>{{customer.dateOfBirth}}</td>
    <td *ngIf="customer.gender==1">Nam</td>
    <td *ngIf="customer.gender==0">Nu</td>
    <td>{{customer.indentity}}</td>
    <td>{{customer.phone}}</td>
    <td>{{customer.email}}</td>
    <td>{{customer.address}}</td>
    <td>
      <button type="button"  (click)="detail(customer)" class="btn btn-success text-dark " style="color: white;border: white" data-toggle="modal" data-target="#detail">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
      </button>
    </td>
    <td>
      <button class="btn btn-warning text-dark" type="button" (click)="edit(customer)" data-toggle="modal" data-target="#edit">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
          <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
          <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
        </svg>
      </button>
    </td>
    <td>
      <button type="button" class="btn btn-danger " style="color: white;border: white" data-toggle="modal" data-target="#delete"
              (click)="setDelete(customer.id)">
         <i class="bi bi-trash3"></i>
      </button>
    </td>
  </tr>
</table>

<div class="row">
  <div class="col-4" >
    <button (click)="resetForm()" class="btn btn-success center-box form-control text-dark" data-toggle="modal" data-target="#addNew">𝔸𝔻𝔻</button>
  </div>
  <div class="col-4"></div>
  <div class="col-4"></div>
</div>


<!--modal-add-->
<div class="modal fade" id="addNew" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header center-box border-0">
        <h5 class="modal-title ">ADD NEW</h5>
      </div>
      <div class="modal-body border-0">
        <form [formGroup]="customerForm">
          <div class="form-group">
            <label>Id:</label>
            <input type="text" class="form-control" formControlName="id">
            <p
              *ngIf="customerForm.controls.id.hasError('required')
              &&( customerForm.controls.id.touched || customerForm.controls.id.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Cutomer type:</label>
            <select class="form-control" formControlName="customerType">
              <option value="null">--Choose Customer Type--</option>
              <option [ngValue]="type" *ngFor="let type of customerTypeList ">{{type.name}}</option>
            </select>
            <p
              *ngIf="customerForm.controls.customerType.hasError('required')
              &&( customerForm.controls.customerType.touched || customerForm.controls.customerType.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Name:</label>
            <input type="text" class="form-control" formControlName="name">
            <p
              *ngIf="customerForm.controls.name.hasError('required')
              &&( customerForm.controls.name.touched || customerForm.controls.name.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>DateOfBirth:</label>
            <input type="date" class="form-control" formControlName="dateOfBirth">
            <p
              *ngIf="customerForm.controls.dateOfBirth.hasError('required')
              &&( customerForm.controls.dateOfBirth.touched || customerForm.controls.dateOfBirth.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Gender:</label>
            <select class="form-control" formControlName="gender">
              <option value="">--Choose Gender--</option>
              <option value="1">Nam</option>
              <option value="0">Nu</option>
            </select>
            <p
              *ngIf="customerForm.controls.gender.hasError('required')
              &&( customerForm.controls.gender.touched || customerForm.controls.gender.dirty)">
              Not Empty
            </p>
          </div>

          <div class="form-group">
            <label>Indentity :</label>
            <input type="text" class="form-control" formControlName="indentity">
            <p
              *ngIf="customerForm.controls.indentity.hasError('required')
              &&( customerForm.controls.indentity.touched || customerForm.controls.indentity.dirty)">
              Not Empty
            </p>
          </div>

          <div class="form-group">
            <label>Phone :</label>
            <input type="text" class="form-control" formControlName="phone">
            <p
              *ngIf="customerForm.controls.phone.hasError('required')
              &&( customerForm.controls.phone.touched || customerForm.controls.phone.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Email :</label>
            <input type="text" class="form-control" formControlName="email">
            <p
              *ngIf="customerForm.controls.email.hasError('required')
              &&( customerForm.controls.email.touched || customerForm.controls.email.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Address :</label>
            <input type="text" class="form-control" formControlName="address">
            <p
              *ngIf="customerForm.controls.address.hasError('required')
              &&( customerForm.controls.address.touched || customerForm.controls.address.dirty)">
              Not Empty
            </p>
          </div>

        </form>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-warning" data-dismiss="modal" [disabled]="customerForm.invalid"
                (click)="onSubmit()">Save changes
        </button>
      </div>
    </div>
  </div>
</div>
</div>


<!--modal-edit-->
<div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header center-box border-0">
        <h5 class="modal-title ">EDIT</h5>
      </div>
      <div class="modal-body border-0">
        <form [formGroup]="customerForm">
          <div class="form-group">
            <label>Id:</label>
            <input type="text" class="form-control" formControlName="id">
            <p
              *ngIf="customerForm.controls.id.hasError('required')
              &&( customerForm.controls.id.touched || customerForm.controls.id.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Cutomer type:</label>
            <select class="form-control" formControlName="customerType" [compareWith]="compareWithId">
              <option value="">--choose customer type--</option>
              <option [ngValue]="type" *ngFor="let type of customerTypeList ">{{type.name}}</option>
            </select>
            <p
              *ngIf="customerForm.controls.customerType.hasError('required')
              &&( customerForm.controls.customerType.touched || customerForm.controls.customerType.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Name:</label>
            <input type="text" class="form-control" formControlName="name">
            <p
              *ngIf="customerForm.controls.name.hasError('required')
              &&( customerForm.controls.name.touched || customerForm.controls.name.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>DateOfBirth:</label>
            <input type="date" class="form-control" formControlName="dateOfBirth">
            <p
              *ngIf="customerForm.controls.dateOfBirth.hasError('required')
              &&( customerForm.controls.dateOfBirth.touched || customerForm.controls.dateOfBirth.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Gender:</label>
            <select class="form-control" formControlName="gender">
              <option value="1">Nam</option>
              <option value="0">Nu</option>
            </select>
            <p
              *ngIf="customerForm.controls.gender.hasError('required')
              &&( customerForm.controls.gender.touched || customerForm.controls.gender.dirty)">
              Not Empty
            </p>
          </div>

          <div class="form-group">
            <label>Indentity :</label>
            <input type="text" class="form-control" formControlName="indentity">
            <p
              *ngIf="customerForm.controls.indentity.hasError('required')
              &&( customerForm.controls.indentity.touched || customerForm.controls.indentity.dirty)">
              Not Empty
            </p>
          </div>

          <div class="form-group">
            <label>Phone :</label>
            <input type="text" class="form-control" formControlName="phone">
            <p
              *ngIf="customerForm.controls.phone.hasError('required')
              &&( customerForm.controls.phone.touched || customerForm.controls.phone.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Email :</label>
            <input type="text" class="form-control" formControlName="email">
            <p
              *ngIf="customerForm.controls.email.hasError('required')
              &&( customerForm.controls.email.touched || customerForm.controls.email.dirty)">
              Not Empty
            </p>
          </div>
          <div class="form-group">
            <label>Address :</label>
            <input type="text" class="form-control" formControlName="address">
            <p
              *ngIf="customerForm.controls.address.hasError('required')
              &&( customerForm.controls.address.touched || customerForm.controls.address.dirty)">
              Not Empty
            </p>
          </div>

        </form>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-warning" data-dismiss="modal" [disabled]="customerForm.invalid"
                (click)="update()">Save changes
        </button>
      </div>
    </div>
  </div>
</div>

<!--modal detele-->
<div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header center-box border-0">
        <h5 class="modal-title ">DELETE FACILITY</h5>
      </div>
      <div class="modal-body border-0">
        Are you sure to delete customer have {{idToDelete}}
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="delete()">Delete</button>
      </div>
    </div>
  </div>
</div>

<!--modal detail-->
<div class="modal fade" id="detail" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header center-box border-0">
        <h5 class="modal-title ">CUSTOMER</h5>
      </div>
      <div class="modal-body border-0">
        <p>Id: {{customerDetail.id}}</p> <br>
        <p>Customer type: {{customerDetail.customerType.name}}</p> <br>
        <p>Name: {{customerDetail.name}}</p> <br>
        <p>Date of birth: {{customerDetail.dateOfBirth}}</p> <br>
<!--        <p *ngIf="customerDetail.gender == 0 ">Gender: Nam</p> <br>-->
<!--        <p *ngIf="customerDetail.gender == 0 ">Gender: Nu</p> <br>-->
        <p>Gender: {{customerDetail.gender}}</p> <br>
        <p>Indentity: {{customerDetail.indentity}}</p> <br>
        <p>Phone: {{customerDetail.phone}}</p> <br>
        <p>Email: {{customerDetail.email}}</p> <br>
        <p>Address: {{customerDetail.address}}</p>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
